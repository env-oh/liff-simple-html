<html>
  <head>
    <meta charset="UTF-8" />
    <!-- <script src="script.js"></script> -->
    <!-- <link rel="stylesheet" type="text/css" href="styles.css"> -->
  </head>
  <body id="body">
    <section id="profile">
      <img
        id="pictureUrl"
        src="https://www.kindpng.com/picc/m/22-223965_no-profile-picture-icon-circle-member-icon-png.png"
        width="200"
      />
      <p id="os">script not running</p>

      <p id="userId"></p>
      <p id="displayName"></p>
      <p id="statusMessage"></p>
    </section>
  </body>
  <!-- <script type="text/javascript">
    const userId = document.getElementById('userId');
    userId.innerHTML = 'from script';
  </script> -->
  <script
    charset="utf-8"
    src="https://static.line-scdn.net/liff/edge/2/sdk.js"
  ></script>

  <script src="index.js"></script>
  <!-- <script
    charset="utf-8"
    src="https://static.line-scdn.net/liff/edge/2/sdk.js"
  ></script>

  <script type="text/javascript">
    const body = document.getElementById('body');
    const pictureUrl = document.getElementById('pictureUrl');
    const os = document.getElementById('os');
    const userId = document.getElementById('userId');
    const displayName = document.getElementById('displayName');
    const statusMessage = document.getElementById('statusMessage');
    //const email = document.getElementById('email');

    async function main() {
      // use function after init is easier
      // liff.ready.then(
      //   () => {
      //     if (liff.isInClient()) {
      //       mainLiff();
      //     }
      //   },
      //   (err) => {
      //     os.innerHTML = 'error' + err;
      //   }
      // );
      await liff.init(
        { liffId: '1657051316-r2qQzYRj' },
        () => {
          os.innerHTML = '<b>OS: </b>' + liff.getOS();
          mainLiff();
          // if (liff.isLoggedIn()) {
          //   mainLiff();
          // } else {
          //   os.innerHTML = 'not login in LINE';
          // }
        },
        (err) => {
          os.innerHTML = 'error' + err;
        }
      );
    }

    main();

    function mainLiff() {
      //os.innerHTML = '<b>OS: </b>' + liff.getOS();
      if (liff.isInClient()) {
        getUserProfile();
      } else {
        userId.innerHTML = 'please use in LINE';
      }
    }

    async function getUserProfile() {
      const profile = await liff.getProfile();
      pictureUrl.src = profile.pictureUrl;
      userId.innerHTML = '<b>User ID: </b>' + profile.userId;
      displayName.innerHTML = '<b>displayName: </b>' + profile.displayName;
      statusMessage.innerHTML =
        '<b>statusMessage: </b>' + profile.statusMessage;
    }
  </script> -->
</html>
